<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Daftar Akun</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: linear-gradient(135deg, #4e342e, #a1887f);
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Poppins', sans-serif;
        overflow: hidden;
      }

      .card {
        width: 95%;
        max-width: 380px;
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        background: #fffaf5;
        padding: 1.2rem 1.5rem;
      }

      .title {
        color: #6f4e37;
        font-weight: 700;
        font-size: 1.1rem;
        letter-spacing: 0.5px;
      }

      label {
        color: #5d4037;
        font-weight: 500;
        font-size: 0.85rem;
      }

      .form-control {
        border: 1px solid #c7a17a;
        border-radius: 8px;
        padding: 8px;
        font-size: 0.9rem;
      }

      .form-control:focus {
        border-color: #8b5e3c;
        box-shadow: 0 0 0 0.15rem rgba(139, 94, 60, 0.25);
      }

      .btn-custom {
        background: #8b5e3c;
        border: none;
        border-radius: 8px;
        padding: 0.55rem;
        font-weight: 600;
        color: #fffaf0;
        transition: 0.3s;
        font-size: 0.95rem;
      }

      .btn-custom:hover {
        background: #6f4e37;
      }

      .footer-text {
        margin-top: 0.8rem;
        color: #4e342e;
        font-size: 0.85rem;
      }

      .footer-text a {
        color: #8b5e3c;
        font-weight: 600;
        text-decoration: none;
      }

      .brand-header {
        text-align: center;
        margin-bottom: 1rem;
      }

      .brand-header h1 {
        font-size: 1.3rem;
        color: #4e342e;
        font-weight: 700;
        margin-bottom: 0.2rem;
      }

      .brand-header p {
        color: #8d6e63;
        font-size: 0.8rem;
      }

      textarea {
        resize: none;
        height: 60px;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="brand-header">
        <h1>Restoran Nusantara</h1>
        <p>Nikmati cita rasa khas Indonesia</p>
      </div>
      <h5 class="text-center title mb-3">Buat Akun Baru</h5>

      <form id="registerForm">
        <div class="mb-2">
          <label class="form-label">Nama Lengkap</label>
          <input type="text" id="nama" class="form-control" required />
        </div>
        <div class="mb-2">
          <label class="form-label">Nomor Telepon</label>
          <input type="text" id="telepon" class="form-control" required />
        </div>
        <div class="mb-2">
          <label class="form-label">Alamat Lengkap</label>
          <textarea id="alamat" class="form-control" required></textarea>
        </div>
        <div class="mb-2">
          <label class="form-label">Email</label>
          <input type="email" id="email" class="form-control" required />
        </div>
        <div class="mb-3">
          <label class="form-label">Kata Sandi</label>
          <input type="password" id="password" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-custom w-100">
          Daftar Sekarang
        </button>
      </form>

      <p class="footer-text text-center">
        Sudah punya akun?
        <a href="login.html">Masuk</a>
      </p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="firebase-config.js"></script>
    <script>
      document
        .getElementById("registerForm")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const nama = document.getElementById("nama").value;
          const telepon = document.getElementById("telepon").value;
          const alamat = document.getElementById("alamat").value;
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          auth
            .createUserWithEmailAndPassword(email, password)
            .then((userCredential) => {
              const user = userCredential.user;

              return user.sendEmailVerification().then(() => {
                return db.ref("users/" + user.uid).set({
                  nama,
                  telepon,
                  alamat,
                  email,
                });
              });
            })
            .then(() => {
              alert(
                "Registrasi berhasil! Silakan cek email Anda untuk verifikasi."
              );
              window.location.href = "login.html";
            })
            .catch((error) => {
              alert("Error: " + error.message);
            });
        });
    </script>
  </body>
</html>
